# ===================================================================
#   Machine configuration
# ===================================================================
MACHINE ?= "raspberrypi4-64"

# ===================================================================
#   Downloads and sstate cache directories
# ===================================================================
DL_DIR ?= "/home/isaac/poky/downloads"
SSTATE_DIR ?= "/home/isaac/poky/sstate-cache"
UNINATIVE_DLDIR ?= "${DL_DIR}/uninative"
DISTRO ?= "poky"


# ===================================================================
#   Build optimization
# ===================================================================
INHERIT += "rm_work"

# ===================================================================
#   Packages to include in the image
# ===================================================================
IMAGE_INSTALL:append = " \
    python3 \
    python3-requests python3-pyserial python3-smbus2 python3-gpiod \
    iw \
    python3-flask \
    wpa-supplicant wpa-supplicant-cli \
    linux-firmware\
    dhcpcd net-tools ethtool \
    openssh \
    nano \
    connect-wifi \ 
"


# ===================================================================
#   Image features
# ===================================================================
IMAGE_FEATURES += " ssh-server-openssh "
EXTRA_IMAGE_FEATURES += " debug-tweaks "

# ===================================================================
#   Extra rootfs space (512 MB)
# ===================================================================
IMAGE_ROOTFS_EXTRA_SPACE = "524288"

# ===================================================================
#   Licenses (para Wi-Fi firmware)
# ===================================================================
LICENSE_FLAGS_ACCEPTED += "synaptics-killswitch"

# ===================================================================
#   Version control
# ===================================================================
CONF_VERSION = "2"

BB_NUMBER_THREADS = "12"

INHERIT:remove = "spdx"
